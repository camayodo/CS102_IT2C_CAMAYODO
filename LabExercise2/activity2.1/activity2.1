---
title: "Untitled"
author: "Ann Margaret Camayodo"
date: "2024-02-29"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

install.packages("dplyr")
install.packages("rvest")
install.packages("httr")
install.packages("polite")

SCRAPING FOR 50

Movie 1
```{r}

library(dplyr)
library(rvest)
library(polite)
library(httr)
library(selectr)

movie1 <- data.frame()

for (page in 1:5) {
  link1 <- paste0("https://www.imdb.com/title/tt1510985/reviews/?ref_=tt_ov_rt", page)
  session1 <- bow(link1, user_agent = "Educational Purpose")

  scrapeNodes <- function(selector) {
    scrape(session1) %>%
      html_nodes(selector) %>%
      html_text(trim = TRUE)
  }

  MovieName1 <- "Never Sleep Again: The Elm Street Legacy"
  scrapedTitle <- scrapeNodes("a.title")[1:10]
  scrapedReviewer <- scrapeNodes(".display-name-link a")[1:10]
  scrapedReview <- scrapeNodes("div.content:nth-of-type(3) div.text")[1:10]
  scrapedDate <- scrapeNodes("span.review-date")[1:10]
  scrapedRating <- scrapeNodes(".ipl-star-icon path:nth-of-type(1)")[1:10]
  scrapedType <- scrapeNodes(".sc-ab73d3b3-1 a.ipc-metadata-list-item__list-content-item")[1:10]

movie1 <- rbind(movie1, data.frame(
    movie_name = MovieName1,
    title = scrapedTitle,
    reviewer = scrapedReviewer,
    review = scrapedReview,
    date = scrapedDate,
    ratings = scrapedRating,
    type_of_movie= scrapedType
  ))

 
}

View(movie1)

```
Movie 2
```{r}

library(dplyr)
library(rvest)
library(polite)
library(httr)
library(selectr)

movie2 <- data.frame()

for (page in 1:5) {
  link1 <- paste0("https://www.imdb.com/title/tt5123896/reviews/?ref_=tt_ov_rt", page)
  session1 <- bow(link1, user_agent = "Educational Purpose")

  scrapeNodes <- function(selector) {
    scrape(session1) %>%
      html_nodes(selector) %>%
      html_text(trim = TRUE)
  }

  MovieName2 <- "Scream, Queen! My Nightmare on Elm Street"
  scrapedTitle <- scrapeNodes("a[itemprop='url']")[1:10]
  scrapedReviewer <- scrapeNodes(".collapsable a.title")[1:10]
  scrapedReview <- scrapeNodes(".collapsable div.text")[1:10]
  scrapedDate <- scrapeNodes("span.review-date")[1:10]
  scrapedRating <- scrapeNodes(".ipl-star-icon path")[1:10]
  scrapedType <- scrapeNodes(".sc-ab73d3b3-1 a.ipc-metadata-list-item__list-content-item")[1:10]

movie2 <- rbind(movie2, data.frame(
    movie_name = MovieName1,
    title = scrapedTitle,
    reviewer = scrapedReviewer,
    review = scrapedReview,
    date = scrapedDate,
    ratings = scrapedRating,
    type_of_movie= scrapedType
  ))

 
}

View(movie2)

```
